(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{735:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(11);function a(e,t,n,a){return r.a({actions:t,selectors:n,containers:e},a)}},737:function(e,t,n){},738:function(e,t,n){"use strict";var r=n(11),a=n(0),o=n(740);n(739),n(737);t.a=function(e){return a.createElement(o.a,r.a({},e))}},744:function(e,t,n){},746:function(e,t,n){},748:function(e,t,n){},750:function(e,t,n){},772:function(e,t,n){"use strict";n.r(t);var r={};n.d(r,"loadFields",function(){return l}),n.d(r,"loadFieldsSuccess",function(){return c}),n.d(r,"loadFieldsFail",function(){return u}),n.d(r,"changeFieldValue",function(){return d});var a={};n.d(a,"selectFields",function(){return S}),n.d(a,"selectCommunication",function(){return L}),n.d(a,"selectValues",function(){return A}),n.d(a,"selectFlatValues",function(){return I}),n.d(a,"selectLocationValues",function(){return N});var o,i=n(735),s=n(92),l=(o=Object(s.c)("DYNAMIC_FIELDS:LOAD_FIELDS","DYNAMIC_FIELDS:LOAD_FIELDS_SUCCESS","DYNAMIC_FIELDS:LOAD_FIELDS_FAIL")).execute,c=o.completed,u=o.failed;function d(e,t){return{type:"DYNAMIC_FIELDS:CHANGE_FIELD_VALUE",payload:{name:e,value:t}}}var p=n(11),h=n(0),m=n(758),f=n.n(m),v=n(22),g=n(32),y=n.n(g);n(750);var E=function(e){var t=e.label,n=e.children,r=y()("input-group");return h.createElement("div",{className:r()},h.createElement("label",{className:r("label-wrapper")()},h.createElement("span",{className:r("label")()},t),h.createElement("div",{className:r("input-wrapper")()},n)))},C=(n(748),y()("errors"));var b=function(e){var t=e.hidden,n=e.errors,r=void 0===n?[]:n;return h.createElement("div",{className:C({hidden:Boolean(t)})()},r.map(function(e,t){return h.createElement("span",{key:t,className:C("error")()},e)}))};function F(e){return e.label&&"string"==typeof e.label}var D=function(e){function t(t){var n=e.call(this,t)||this;return n.state={errors:[],isEdited:!1},n}return p.d(t,e),t.prototype.componentDidMount=function(){this.validateAndChange({label:""})},t.prototype.render=function(){var e=this.props,t=e.placeholder,n=e.label,r=this.state,a=r.errors,o=r.isEdited,i=new google.maps.LatLng(7.75,80.76667);return h.createElement(E,{label:n},h.createElement(f.a,{placeholder:t,location:i,queryDelay:1e3,radius:"330",inputClassName:"form-control",onSuggestSelect:this.onSelect}),h.createElement(b,{errors:this.props.errors?a.concat(this.props.errors):a,hidden:!o}))},t.prototype.onSelect=function(e){this.validateAndChange(e),this.setState(function(e){return p.a({},e,{isEdited:!0})})},t.prototype.validateAndChange=function(e){var t=this.props,n=t.onChange,r=[];!t.required||e.label&&e.placeId||r.push("Field is required"),n&&n(e,r),this.setState(p.a({},this.state,{errors:r}))},p.c([v.bind],t.prototype,"onSelect",null),p.c([v.bind],t.prototype,"validateAndChange",null),t}(h.Component);function S(e){return e.data.fields}function L(e){return e.communication}function A(e){return e.data.values}function I(e){var t=A(e);return Object.keys(t).reduce(function(e,n){var r,a,o=t[n];return F(o)?p.a({},e,((r={})[n]=o.label,r)):p.a({},e,((a={})[n]=o,a))},{})}function N(e){var t=A(e);return Object.keys(t).reduce(function(e,n){var r,a=t[n];return F(a)?p.a({},e,((r={})[n]=a.location?a.location:{lat:0,lng:0},r)):e},{})}var _=n(77),O=n(29),q={communication:{fetching:{isRequesting:!1,error:""}},data:{fields:{},values:{}}};var M=Object(O.combineReducers)({communication:Object(O.combineReducers)({fetching:Object(s.d)("DYNAMIC_FIELDS:LOAD_FIELDS","DYNAMIC_FIELDS:LOAD_FIELDS_SUCCESS","DYNAMIC_FIELDS:LOAD_FIELDS_FAIL",q.communication.fetching)}),data:function(e,t){switch(void 0===e&&(e=q.data),t.type){case"DYNAMIC_FIELDS:LOAD_FIELDS":return p.a({},e,{values:{},fields:p.a({},e.fields,{uid:t.payload})});case"DYNAMIC_FIELDS:LOAD_FIELDS_SUCCESS":return p.a({},e,{fields:t.payload});case"DYNAMIC_FIELDS:CHANGE_FIELD_VALUE":var n=t.payload;return p.a({},e,{values:p.a({},e.values,(r={},r[n.name]=n.value,r))});default:return e}var r}}),w=n(17);var j=function(e){return h.createElement(w.d,{type:e.type,placeholder:e.placeholder,name:e.name,minLength:e.minLength,maxLength:e.maxLength,step:e.step,pattern:e.pattern,onChange:e.onChange})},V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={errors:[],isEdited:!1},t}return p.d(t,e),t.prototype.componentDidMount=function(){this.changeValue("")},t.prototype.render=function(){var e=this.props,t=e.name,n=e.label,r=e.placeholder,a=e.minLength,o=e.maxLength,i=this.state,s=i.errors,l=i.isEdited;return h.createElement(E,{label:n},h.createElement(j,{type:"text",name:t,placeholder:r,minLength:a,maxLength:o,onChange:this.onChange}),h.createElement(b,{errors:this.props.errors?s.concat(this.props.errors):s,hidden:!l}))},t.prototype.onChange=function(e){var t=e.nativeEvent.target.value;this.changeValue(t),this.state.isEdited||this.setState(function(e,t){return p.a({},e,{isEdited:!0})})},t.prototype.changeValue=function(e){var t=this.props,n=t.required,r=t.onChange,a=[];n&&!e.length&&a.push("Field is required"),this.setState(p.a({},this.state,{errors:a})),r&&r(e,a)},p.c([v.bind],t.prototype,"onChange",null),p.c([v.bind],t.prototype,"changeValue",null),t}(h.Component),x=function(e){function t(t){var n=e.call(this,t)||this;return n.errors={required:"Field is required",tooLow:"Number value is too low",tooBig:"Number value is too big",invalid:"Number value is incorrect"},n.state={errors:[],isEdited:!1},n}return p.d(t,e),t.prototype.componentDidMount=function(){var e=this.validate("");this.change("",e)},t.prototype.render=function(){var e=this.props,t=e.name,n=e.isFloat,r=e.label,a=e.pattern,o=e.placeholder,i=e.minimum,s=e.maximum,l=this.state,c=l.errors,u=l.isEdited;return h.createElement(E,{label:r},h.createElement(j,{name:t,type:"number",step:n?.01:void 0,pattern:a,placeholder:o,min:i,max:s,onChange:this.onChange}),h.createElement(b,{errors:this.props.errors?c.concat(this.props.errors):c,hidden:!u}))},t.prototype.onChange=function(e){var t=e.nativeEvent.target.value,n=this.validate(t);this.change(t,n),this.setState(function(e){return p.a({},e,{isEdited:!0})})},t.prototype.validate=function(e){var t=this.props,n=t.isFloat,r=t.minimum,a=t.maximum,o=t.required,i=n?parseFloat(e):parseInt(e,10),s=[];return o&&!e?s.push(this.errors.required):isNaN(i)?s.push(this.errors.invalid):(r&&i<r&&s.push(this.errors.tooLow),a&&i>a&&s.push(this.errors.tooBig)),this.setState(p.a({},this.state,{errors:s})),s},t.prototype.change=function(e,t){var n=this.props.onChange;n&&n(e.toString(),t)},p.c([v.bind],t.prototype,"onChange",null),p.c([v.bind],t.prototype,"validate",null),p.c([v.bind],t.prototype,"change",null),t}(h.Component),Y=(n(746),function(e){function t(t){var n=e.call(this,t)||this;return n.b=y()("generic-radio-input"),n.state={errors:[],isEdited:!1},n}return p.d(t,e),t.prototype.componentDidMount=function(){this.validateAndChange("","")},t.prototype.render=function(){var e=this,t=this.b,n=this.props,r=n.name,a=void 0===r?"":r,o=n.label,i=n.enum,s=this.state,l=s.errors,c=s.isEdited;return h.createElement(E,{label:o},h.createElement(w.e,{className:t("radios-group")()},i?i.map(function(n,r){return h.createElement(w.n,{inline:!0,key:r,name:a,className:t("radio-button")(),onChange:e.onChange(a,n)},n)}):"No choices"),h.createElement(b,{errors:this.props.errors?l.concat(this.props.errors):l,hidden:!c}))},t.prototype.onChange=function(e,t){var n=this;return function(){n.validateAndChange(e,t),n.setState(function(e){return p.a({},e,{isEdited:!0})})}},t.prototype.validateAndChange=function(e,t){var n=this.props,r=n.required,a=n.onChange,o=[];r&&!t.length&&o.push("Field is required"),this.setState(p.a({},this.state,{errors:o})),a&&a(t,o)},p.c([v.bind],t.prototype,"onChange",null),p.c([v.bind],t.prototype,"validateAndChange",null),t}(h.Component)),k=n(738),R=function(e){function t(t){var n=e.call(this,t)||this;return n.state={errors:[],selected:null,isEdited:!1},n}return p.d(t,e),t.prototype.componentDidMount=function(){this.validateAndChangeValue(null)},t.prototype.render=function(){var e=this.props,t=e.name,n=e.label,r=e.enum,a=void 0===r?[]:r,o=this.state,i=o.errors,s=o.selected,l=o.isEdited,c=a.map(function(e){return{label:e,value:e}});return h.createElement(E,{label:n},h.createElement(k.a,{name:t,options:c,onChange:this.onSelect,value:s||""}),h.createElement(b,{errors:this.props.errors?i.concat(this.props.errors):i,hidden:!l}))},t.prototype.onSelect=function(e){this.validateAndChangeValue(Array.isArray(e)?e[0]:e),this.setState(function(e){return p.a({},e,{isEdited:!0})})},t.prototype.validateAndChangeValue=function(e){var t=this.props,n=t.required,r=t.onChange,a=[],o="";!e&&n&&a.push("Field is required"),e&&("string"!=typeof e.value&&"number"!=typeof e.value||(o=e.value)),r&&r(o,a),this.setState(p.a({},this.state,{selected:e,errors:a}))},p.c([v.bind],t.prototype,"onSelect",null),t}(h.PureComponent),U=function(e){function t(t){var n=e.call(this,t)||this;return n.standardHTMLpattern="^([0-9]{4})-([0-9]{2})-([0-9]{2})$",n.errors={invalid:"Incorrect Date format",required:"Field is required"},n.state={errors:[],isEdited:!1},n}return p.d(t,e),t.prototype.componentDidMount=function(){this.validateAndChange("")},t.prototype.render=function(){var e=this.props,t=e.name,n=e.label,r=e.pattern,a=e.placeholder,o=this.state,i=o.errors,s=o.isEdited;return h.createElement(E,{label:n},h.createElement(j,{type:"date",name:t,placeholder:a,pattern:r,onChange:this.onChange}),h.createElement(b,{errors:this.props.errors?i.concat(this.props.errors):i,hidden:!s}))},t.prototype.onChange=function(e){var t=e.nativeEvent.target.value;this.validateAndChange(t),this.setState(function(e){return p.a({},e,{isEdited:!0})})},t.prototype.validateAndChange=function(e){var t=this.props,n=t.pattern,r=t.required,a=t.onChange,o=[],i=new RegExp(this.standardHTMLpattern).test(e)?e.split("-").reverse().join("-"):e;n&&!new RegExp(n).test(i)&&o.push(this.errors.invalid),r&&!i.length&&o.push(this.errors.required),this.setState(p.a({},this.state,{errors:o})),a&&a(i,o)},p.c([v.bind],t.prototype,"onChange",null),p.c([v.bind],t.prototype,"validateAndChange",null),t}(h.PureComponent),B=function(e){function t(t){var n=e.call(this,t)||this;return n.errors={invalid:"Incorrect Time format, expected hh:mm"},n.state={errors:[],isEdited:!1},n}return p.d(t,e),t.prototype.componentDidMount=function(){this.validateAndChange("")},t.prototype.render=function(){var e=this.props,t=e.name,n=e.label,r=e.placeholder,a=this.state,o=a.errors,i=a.isEdited;return h.createElement(E,{label:n},h.createElement(j,{type:"time",name:t,placeholder:r,onChange:this.onChange}),h.createElement(b,{errors:this.props.errors?o.concat(this.props.errors):o,hidden:!i}))},t.prototype.onChange=function(e){var t=e.nativeEvent.target.value;this.validateAndChange(t),this.setState(function(e){return p.a({},e,{isEdited:!0})})},t.prototype.validateAndChange=function(e){var t=this.props,n=t.required,r=t.onChange,a=t.pattern,o=[];n&&!e.length?o.push("Field is required"):a&&!new RegExp(a).test(e)&&o.push(this.errors.invalid),this.setState(p.a({},this.state,{errors:o})),r&&r(e,o)},p.c([v.bind],t.prototype,"onChange",null),p.c([v.bind],t.prototype,"validateAndChange",null),t}(h.Component);n(744);var H=y()("dynamic-fields"),P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={values:{},errors:[]},t.components={text:V,integer:x,number:function(e){return h.createElement(x,p.a({},e,{isFloat:!0}))},date:U,time:B,radio:Y,dropdown:R,location:D},t}return p.d(t,e),t.prototype.componentDidMount=function(){this.props.category&&this.changeCategory(this.props.category)},t.prototype.componentDidUpdate=function(e){this.props.category&&e.category!==this.props.category&&this.changeCategory(this.props.category)},t.prototype.render=function(){return h.createElement("div",{className:H()},h.createElement(w.e,null,h.createElement("h4",null,"Dynamic Fields"),this.renderFields()))},t.prototype.changeCategory=function(e){this.setState({values:{},errors:[]}),this.props.loadFields(e)},t.prototype.onFieldChange=function(e){var t=this;return function(n,r){var a=t.props,o=a.changeFieldValue,i=a.onChange;i&&i(e,n,r),o(e,n)}},t.prototype.renderFields=function(){var e=this,t=this.props.fields;if(t&&t.schema&&t.schema.properties){var n=t.schema.required,r=t.schema.properties,a=Object.keys(r).filter(function(t){var n=r[t].component;return e.components.hasOwnProperty(n)}).sort(function(e,t){var n=r[e],a=r[t];return n.order-a.order}).map(function(t){var a=r[t].component,o=e.components[a],i=Boolean(n.find(function(e){return e===t})),s=r[t],l=p.a({},s,{label:i?s.label+"*":s.label}),c=e.state.errors.indexOf(t)>-1?["Required Field"]:[];return h.createElement("div",{className:H("field")(),key:l.order},h.createElement(o,p.a({},l,{required:i,errors:c,name:t,onChange:e.onFieldChange(t)})))});return h.createElement("div",null,a)}return[]},p.c([v.bind],t.prototype,"changeCategory",null),p.c([v.bind],t.prototype,"onFieldChange",null),t}(h.Component),T=Object(_.b)(function(e){var t=e.dynamicFields;return{fields:a.selectFields(t),communications:a.selectCommunication(t)}},function(e){return Object(O.bindActionCreators)({loadFields:r.loadFields,changeFieldValue:r.changeFieldValue},e)})(P),G=n(62),J=n(212);function $(e,t){var n,r,a,o,i=e.api;return p.e(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,5]),n=t.payload,[4,Object(G.a)(i.loadFields,n)];case 1:return r=e.sent(),[4,Object(G.b)(c(r))];case 2:return e.sent(),[3,5];case 3:return a=e.sent(),o=Object(J.a)(a),[4,Object(G.b)(u(o))];case 4:return e.sent(),[3,5];case 5:return[2]}})}var z=function(e){return function(){return p.e(this,function(t){switch(t.label){case 0:return[4,[Object(G.c)("DYNAMIC_FIELDS:LOAD_FIELDS",$,e)]];case 1:return t.sent(),[2]}})}};n.d(t,"entry",function(){return Q});var K={DynamicFields:T},Q=Object(i.a)(K,r,a,{reducers:{dynamicFields:M},sagas:[z]})}}]);