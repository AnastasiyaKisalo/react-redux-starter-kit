(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{735:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var o=n(11);function i(t,e,n,i){return o.a({actions:e,selectors:n,containers:t},i)}},737:function(t,e,n){},738:function(t,e,n){"use strict";var o=n(11),i=n(0),a=n(740);n(739),n(737);e.a=function(t){return i.createElement(a.a,o.a({},t))}},760:function(t,e,n){},762:function(t,e,n){},770:function(t,e,n){"use strict";n.r(e);var o={};n.d(o,"getFeatureState",function(){return c}),n.d(o,"selectSelectedLocation",function(){return r}),n.d(o,"selectAreaById",function(){return s}),n.d(o,"selectCityById",function(){return l});var i={};n.d(i,"loadCities",function(){return d}),n.d(i,"loadCitiesSuccess",function(){return h}),n.d(i,"loadCitiesFail",function(){return m}),n.d(i,"selectLocationByAreaId",function(){return f});var a=n(735);function c(t){return t.locationSelect}function r(t){return c(t).data.selectedLocation}function s(t,e){return c(t).data.entities.areas[e]}function l(t,e){return c(t).data.entities.cities[e]}var p,u=n(92),d=(p=Object(u.c)("LOCATION_SELECT:LOAD_CITIES","LOCATION_SELECT:LOAD_CITIES_SUCCESS","LOCATION_SELECT:LOAD_CITIES_FAIL")).execute,h=p.completed,m=p.failed;function f(t){return{type:"LOCATION_SELECT:SELECT_LOCATION_BY_AREA_ID",payload:t}}var L=n(11),C=n(29),E={communications:{citiesFetching:{isRequesting:!1,error:""}},data:{entities:{areas:{},cities:{}},citiesSet:[],selectedLocation:null},ui:{showSelectedLocation:!1}};var y=Object(C.combineReducers)({ui:function(t,e){switch(void 0===t&&(t=E.ui),e.type){case"LOCATION_SELECT:SELECT_LOCATION_BY_AREA_ID":return L.a({},t,{showSelectedLocation:e.payload.showOnMap});default:return t}},data:function(t,e){switch(void 0===t&&(t=E.data),e.type){case"LOCATION_SELECT:LOAD_CITIES_SUCCESS":var n=e.payload,o=n.entities,i=n.result;return L.a({},t,{entities:o,citiesSet:i});case"LOCATION_SELECT:SELECT_LOCATION_BY_AREA_ID":var a=e.payload.location,c=null;if(a){var r=a.areaID,s=t.entities.areas[r],l=t.entities.cities[s.city],p=a.point?a.point:s.point;c={city:l.id,area:s.id,point:p}}return L.a({},t,{selectedLocation:c});default:return t}},communications:Object(C.combineReducers)({citiesFetching:Object(u.d)("LOCATION_SELECT:LOAD_CITIES","LOCATION_SELECT:LOAD_CITIES_SUCCESS","LOCATION_SELECT:LOAD_CITIES_FAIL",E.communications.citiesFetching)})}),O=n(62),S=n(212),v="LOCATION_SELECT:LOAD_CITIES";function I(t){var e,n,o=t.api;return L.e(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,Object(O.a)(o.loadCities)];case 1:return e=t.sent(),[4,Object(O.b)(h(e))];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),[4,Object(O.b)(m(Object(S.a)(n)))];case 4:return t.sent(),[3,5];case 5:return[2]}})}var g=function(t){return function(){return L.e(this,function(e){switch(e.label){case 0:return[4,[Object(O.c)(v,I,t)]];case 1:return e.sent(),[2]}})}},_=n(0),A=n(32),b=n.n(A),T=n(77),w=n(22),N=n(17),D=(n(762),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.b=b()("google-map"),e.map=null,e.geocoder=null,e.mapContainer=null,e}return L.d(e,t),e.prototype.componentDidUpdate=function(t){var e=this.props.lat!==t.lat||this.props.lng!==t.lng;"number"==typeof this.props.lat&&"number"==typeof this.props.lng&&e&&this.props.showNewPoint&&this.setPoint(this.props.lat,this.props.lng)},e.prototype.setPoint=function(t,e){var n=new google.maps.LatLng(t,e);null!==this.map&&(this.map.setCenter(n),this.map.setZoom(14))},e.prototype.componentWillUnmount=function(){this.map=null,this.geocoder=null},e.prototype.componentDidMount=function(){var t={center:{lat:this.props.lat,lng:this.props.lng},zoom:8};this.geocoder=new google.maps.Geocoder,this.map=new google.maps.Map(this.mapContainer,t),this.map.addListener("dragend",this.onDragEnd)},e.prototype.render=function(){var t=this.b;return _.createElement("div",{className:t()},_.createElement("div",{className:t("map")(),ref:this.onMapRef}))},e.prototype.onDragEnd=function(){if(this.map&&this.geocoder){var t={location:this.map.getCenter()};this.geocoder.geocode(t,this.onPlaceDecoded)}},e.prototype.findAddressComponent=function(t,e){return t.find(function(t){return t.types.includes(e)})},e.prototype.onPlaceDecoded=function(t){var e=t&&t.length?t[0]:null;if(e){var n=this.findAddressComponent(e.address_components,"locality"),o=this.findAddressComponent(e.address_components,"administrative_area_level_2"),i={locality:n?n.long_name:"",area:o?o.long_name:"",point:this.map?this.map.getCenter():null},a=this.props.onLocationSelected;a&&a(i)}},e.prototype.onMapRef=function(t){this.mapContainer=t},e.defaultProps={lat:6.991815,lng:81.055025,showNewPoint:!0},L.c([w.bind],e.prototype,"onDragEnd",null),L.c([w.bind],e.prototype,"onPlaceDecoded",null),L.c([w.bind],e.prototype,"onMapRef",null),e}(_.Component)),M=n(738);n(760);var j=b()("location-select"),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return L.d(e,t),e.prototype.componentDidUpdate=function(t){var e=this.props.onChange;this.props.selectedLocation!==t.selectedLocation&&e&&e(this.props.selectedLocation)},e.prototype.componentDidMount=function(){this.props.loadCities()},e.prototype.render=function(){var t=this.props,e=t.options,n=t.selectedLocation,o=n?n.area:null,i=n?n.city:null,a=this.props.showLocation;return _.createElement("div",{className:j()},_.createElement("div",{className:j("form")()},_.createElement("label",{className:j("label")()},_.createElement("b",null,"Location:")),_.createElement(M.a,{className:j("input")(),options:e,value:o?o.id:"",onChange:this.onSelectLocation}),_.createElement(N.d,{value:o?o.name:"",className:j("input")(),type:"text",placeholder:"Area",disabled:!0}),_.createElement(N.d,{className:j("input")(),value:i?i.name:"",type:"text",placeholder:"City",disabled:!0})),_.createElement("div",{className:j("map")()},_.createElement(D,{lat:o?o.point.lat:void 0,lng:o?o.point.lng:0,showNewPoint:a,onLocationSelected:this.onSelectMapLocation})))},e.prototype.onSelectLocation=function(t){!t||Array.isArray(t)?this.props.selectLocation({showOnMap:!1}):this.props.selectLocation({location:{areaID:+(t.value||0)},showOnMap:!0})},e.prototype.onSelectMapLocation=function(t){var e=t.locality+", "+t.area,n=this.props.options.find(function(t){return t.label===e});if(n){var o=t.point?{lat:t.point.lat(),lng:t.point.lng()}:void 0;this.props.selectLocation({location:{areaID:n.value,point:o},showOnMap:!1})}else this.props.selectLocation({showOnMap:!1})},L.c([w.bind],e.prototype,"onSelectLocation",null),L.c([w.bind],e.prototype,"onSelectMapLocation",null),e}(_.Component),P=Object(T.b)(function(t){var e=o.getFeatureState(t),n=o.selectSelectedLocation(t);return{options:Object.keys(e.data.entities.areas).map(function(t){var n=e.data.entities.areas[parseInt(t,10)];return{label:n.displayName,value:n.id}}),selectedLocation:n&&{point:n.point,area:o.selectAreaById(t,n.area),city:o.selectCityById(t,n.city)},showLocation:e.ui.showSelectedLocation}},function(t){return Object(C.bindActionCreators)({loadCities:i.loadCities,selectLocation:i.selectLocationByAreaId},t)})(B);n.d(e,"entry",function(){return F});var R={LocationSelect:P},F=Object(a.a)(R,i,o,{reducers:{locationSelect:y},sagas:[g]})}}]);